<div align=center><img width="320" height="320" src="./md/hare_momotalk.png"/></div>

![maven](https://img.shields.io/badge/Python-3.8%2B-blue) 
![maven](https://img.shields.io/badge/OpenCV-4.10.0-yellow) 
![maven](https://img.shields.io/badge/pyQt-5.15.10-red)

# è§†é¢‘æ–‡å­—æ¸…é™¤å·¥å…·

****

â€œä»Šå¤©ï¼Œæ™´ä¼šä¿ä½‘ä½ ï¼Œä¸ç®¡å†™ä»€ä¹ˆä»£ç ï¼Œéƒ½ä¸ä¼šå‡ºç°æ¼æ´ã€‚â€ â€”â€” å°é’©æ™´ [ğŸ“¢](https://static.kivo.wiki/voices/students/%E5%B0%8F%E9%92%A9%20%E6%99%B4/guF8G61lNHMhqdeztHSHTAMMEmCG1qy1.ogg)

****

æ­¤é¡¹ç›®åŸºäº OpenCV å’Œ pyQt5 å¼€å‘ï¼Œç”¨äºæ¸…é™¤æ¸¸æˆå‰§æƒ…å½•å±ä¸­çš„å­—å¹•ï¼Œæ–¹ä¾¿æ±‰åŒ–

## ä¸‹è½½

[release](https://github.com/U1805/Hare/releases/tag/v1.0.1r) <- ä»è¿™é‡Œä¸‹è½½

ä¸‹è½½ `Hare.zip` ä¸ `lama.onnx`ï¼Œè§£å‹å‹ç¼©åŒ…åå°† lama æ¨¡å‹æ”¾å…¥æ–‡ä»¶å¤¹ï¼Œä½ åº”è¯¥å¾—åˆ°ä¸‹é¢çš„æ–‡ä»¶ç»“æ„

```
â”œâ”€runtime
â”œâ”€site-packages
â”‚   â”œâ”€cv2
â”‚   â”œâ”€numpy
â”‚   â”œâ”€onnxruntime
â”‚   â””â”€PyQt5
â”œâ”€ffmpeg.exe
â”œâ”€Hare.exe    <- åŒå‡»è¿è¡Œ
â”œâ”€Hare.int
â”œâ”€lama.onnx   <- æ¨¡å‹æ”¾åœ¨è¿™é‡Œ
â””â”€script.egg
```

## æ•ˆæœ

![preview](./md/img1.png)

![preview](./md/img2.png)

## å¿«é€Ÿä¸Šæ‰‹

### ç¬¬ä¸€æ¬¡å°è¯•

ç‚¹å‡» `ğŸ Select Video` é€‰æ‹©è§†é¢‘æ–‡ä»¶

æ»‘åŠ¨è§†é¢‘ä¸‹æ–¹çš„æ‹–åŠ¨æ¡å¯ä»¥é¢„è§ˆè§†é¢‘å†…å®¹ï¼Œåœ¨è§†é¢‘ä¸Šç‚¹å‡»æ»‘åŠ¨åˆ›å»ºæ¶ˆé™¤åŒºåŸŸ

ç‚¹å‡» `ğŸš€ Run` å¼€å§‹è¿è¡Œã€‚è¿è¡Œç»“æŸåï¼Œä¸è§†é¢‘åŒç›®å½•ä¸‹ä¼šå‡ºç°å¸¦åç¼€ `output` çš„ç»“æœæ–‡ä»¶

### æ›´å¤šè®¾ç½®

ç¬¬ä¸€æ¬¡è¿è¡Œçš„æ•ˆæœå¯èƒ½ä¸ç†æƒ³ï¼Œç‚¹å‡» `âš™ï¸ Setting` è¿›å…¥æ›´å¤šè®¾ç½®

è°ƒæ•´ `å™ªå£°` å’Œ `æè¾¹` ä¸¤ä¸ªå‚æ•°ï¼Œé€‰æ‹© `æµ‹è¯•` å¯ä»¥æŸ¥çœ‹æ©ç æ•ˆæœï¼Œç¡®ä¿èƒ½çœ‹åˆ°è¦æ¶ˆé™¤çš„å†…å®¹ï¼Œè€Œä¸éœ€è¦æ¶ˆé™¤çš„å†…å®¹ä¸ºé»‘è‰²

é€‰æ‹© `ä¿®å¤ç®—æ³•` é¢„è§ˆæ¶ˆé™¤æ•ˆæœï¼Œå…¶ä¸­ç®—æ³• 1 ä¸º opencv å†…ç½®çš„ inpaint å‡½æ•°ï¼Œç®€å•ä¸”å¿«ï¼Œç®—æ³• 2 æ˜¯ [ğŸ¦™LaMa](https://github.com/advimman/lama) æ¨¡å‹çš„ä¿®å¤ç®—æ³•ï¼Œæ…¢ä½†æ˜¯æ•ˆæœå¥½

ç‚¹å‡» `ä¿®å¤ç®—æ³•` åï¼Œä¹‹åè¿è¡Œå°±æ˜¯ä»¥åˆšç‚¹è¿‡çš„ç®—æ³•è¿›è¡Œæ¶ˆé™¤

> å¦‚æœæ¶ˆé™¤æ•ˆæœä¸å¥½ï¼Œè¯·ç¡®è®¤æ˜¯æ©ç çš„é—®é¢˜è¿˜æ˜¯ä¿®å¤çš„é—®é¢˜ï¼Œå‰è€…å¯ä»¥é€šè¿‡è°ƒæ•´å‚æ•°åº”å¯¹å¤§éƒ¨åˆ†æƒ…å†µï¼ˆæˆ–è€…æ issue å‹åŠ›æˆ‘ä¼˜åŒ–ç®—æ³•ï¼‰ï¼Œåè€…å¦‚æœ Lama çš„ä¿®å¤æ•ˆæœä¹Ÿä¸å¥½çš„è¯å¯ä»¥è€ƒè™‘[è‡ªå·±ç‚¼ä¸ªæ¨¡å‹](https://github.com/advimman/lama?tab=readme-ov-file#train-and-eval) -> [è½¬æˆ onnx](./md/export_LaMa_to_onnx.ipynb)

### åŒºé—´æ¶ˆé™¤

å…ˆå·²å¢åŠ å¯¹éƒ¨åˆ†è§†é¢‘çš„æ–‡å­—æ¶ˆé™¤ã€‚æ»‘åŠ¨è§†é¢‘ä¸‹çš„æ‹–åŠ¨æ¡åï¼Œç‚¹å‡»å·¦å³çš„æŒ‰é’® `Start/End` æ ‡è®°å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´

è¿è¡Œæ—¶åªä¼šå¤„ç†åŒºé—´å†…çš„è§†é¢‘å¸§

## TODO

- [x] ç«–å±é€‰åŒºé—®é¢˜
- [x] å¤šçº¿ç¨‹åŠ é€Ÿ
- [ ] çª—å£å¤§å°è‡ªé€‚åº”
- [x] æ›´å¥½çš„æ©ç ç®—æ³•ï¼ˆè¿˜æœ‰å›¾åƒä¿®å¤ç®—æ³•ï¼‰
- [ ] æ›´æ›´å¥½çš„æ©ç ç®—æ³•
- [x] è¿è¡Œæ—¶ç¦ç”¨UIç»„ä»¶
- [x] å¯¼å‡ºæ—¶åˆå¹¶å£°éŸ³
- [x] å‚æ•°æŒä¹…åŒ–
- [ ] æ—¶è½´æ ·å¼ï¼ˆæ‰“å­—æœºã€åŒè¯­ï¼‰
- [x] ä¿®å¤å¹¶è¡Œæ²¡æœ‰è¾¹å¤„ç†è¾¹å†™å…¥çš„é—®é¢˜
- [x] æ–¹å‘é”®æ§åˆ¶æ‹–åŠ¨æ¡ï¼ˆä¸€å¸§ã€Shiftäº”å¸§ï¼‰

## License

[MIT license](./LICENSE)

## æ„Ÿè°¢

- [FFmpeg](http://ffmpeg.org/) - ä¼Ÿå¤§ï¼Œæ— éœ€å¤šè¨€
- [skywind3000/PyStand](https://github.com/skywind3000/PyStand) - ğŸš€ è¶…æ–¹ä¾¿çš„ Python ç‹¬ç«‹éƒ¨ç½²ç¯å¢ƒ
- [advimman/lama](https://github.com/advimman/lama) - ğŸ¦™ åŸºäºå‚…é‡Œå¶å·ç§¯çš„å›¾åƒä¿®å¤
- [Carve-Photos/lama](https://github.com/Carve-Photos/lama) - ONNX æ¨¡å‹çš„ LaMa
- [U1805/Blue_Archive_Timerstamper](https://github.com/U1805/Hare/tree/main) - ä»¥å‰çƒ¤è‚‰å·¥å…·çš„ç»éªŒï¼ˆæˆ‘è°¢æˆ‘è‡ªå·±